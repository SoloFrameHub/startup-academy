# SOLOFRAMEHUB ACADEMY SYSTEMS PROMPT

## PROJECT OVERVIEW

You are building **SoloFrameHub Academy**, a comprehensive Supabase-based educational platform teaching solo founders and small teams how to build AI-powered bootstrapped businesses through **deep strategic frameworks**, not quick-action checklists. This is a **teaching-first, outcome-focused platform** that prioritizes explanation before application and real business milestones over lesson completion metrics.

**Core Philosophy**:
- 70% experiential learning, 20% social/community, 10% formal instruction
- Strategic depth over execution speed
- Business outcomes (first customer, first revenue) trump course completion percentages
- Quality of thinking matters more than rapid execution
- Soft encouragement, never hard gates

**Target Audience**: Solo founders and small teams (38% of all startups), bootstrappers building to profitability, founders keeping day jobs while building, non-technical founders needing AI fluency, $0-$100K MRR stage companies.

**Market Positioning**: Premium but accessible ($299-$799), AI-native education, cohort-light delivery (self-paced + accountability pods + monthly Q&A), 60%+ target completion rate.

---

## TECHNICAL ARCHITECTURE

### Core Stack
- **Frontend**: React with TypeScript, Tailwind CSS, Vite
- **Backend**: Supabase (PostgreSQL, Authentication, Storage, Edge Functions)
- **AI Integration**: Google Gemini 2.5 Pro (for strategic coaching, document analysis, exercise evaluation)
- **Payment**: Stripe integration with subscription support
- **Community**: Hybrid approach - VPS-hosted NodeBB forum + lightweight in-app features + Discord for real-time
- **Email**: Edge Functions for transactional emails, SendGrid/Mailgun for sequences

### Database Schema (Supabase PostgreSQL)

```typescript
// Core Collections

users/ (auth.users + extended profile)
  user_profiles:
    user_id: uuid (FK to auth.users)
    full_name: text
    avatar_url: text
    bio: text
    current_stage: enum('idea', 'validation', 'pre-launch', '0-10k', '10k-100k', 'scaling')
    business_context: text
    enrolled_at: timestamptz
    subscription_tier: enum('free', 'foundation', 'growth', 'elite')

user_stats:
    user_id: uuid (FK)
    current_streak: int DEFAULT 0
    longest_streak: int DEFAULT 0
    total_points: int DEFAULT 0
    current_level: text DEFAULT 'Aspiring Founder'
    lessons_completed: int DEFAULT 0
    exercises_submitted: int DEFAULT 0
    total_study_time: int DEFAULT 0 (minutes)
    last_activity_at: timestamptz

courses:
    id: uuid PRIMARY KEY
    title: text NOT NULL
    slug: text UNIQUE NOT NULL
    tagline: text
    description: text (rich HTML)
    thumbnail_url: text
    promo_video_url: text
    tier: enum('foundation', 'growth', 'scale', 'mastery')
    target_stage: enum('idea', 'pre-launch', '0-10k', '10k-100k', 'scaling')
    competencies: text[] (e.g., ['SC1', 'SC3', 'SC5'])
    prerequisites: uuid[] (course IDs)
    base_price: decimal
    estimated_hours: int
    status: enum('draft', 'published', 'archived')
    enrollment_count: int DEFAULT 0
    avg_rating: decimal
    created_at: timestamptz
    updated_at: timestamptz

lessons:
    id: uuid PRIMARY KEY
    course_id: uuid REFERENCES courses(id)
    order_index: int NOT NULL
    title: text NOT NULL
    slug: text
    objectives: text[] (learning objectives)
    estimated_minutes: int
    content_type: enum('video', 'article', 'exercise', 'case_study', 'assessment')

    // Content fields (conditional based on type)
    video_url: text
    video_duration: int
    video_transcript: text

    article_content: text (rich HTML/Markdown)
    article_reading_time: int

    exercise_type: text (e.g., 'framework_builder', 'document_critique')
    exercise_prompt: text
    exercise_instructions: text[]
    exercise_rubric: jsonb

    case_study_content: jsonb

    resources: jsonb[] (downloadable files, templates)
    prerequisites: uuid[] (lesson IDs)
    created_at: timestamptz

user_progress:
    user_id: uuid REFERENCES auth.users(id)
    course_id: uuid REFERENCES courses(id)
    current_lesson_id: uuid
    completed_lessons: uuid[]
    completion_percentage: int DEFAULT 0
    last_accessed_at: timestamptz
    time_spent_minutes: int DEFAULT 0
    milestones_achieved: text[]
    PRIMARY KEY (user_id, course_id)

submissions:
    id: uuid PRIMARY KEY
    user_id: uuid REFERENCES auth.users(id)
    lesson_id: uuid REFERENCES lessons(id)
    exercise_type: text
    user_response: text
    submitted_at: timestamptz
    ai_evaluation: jsonb (scores, feedback, improvement areas)
    is_public: boolean DEFAULT false (for community showcase)
    feedback_request: text (what user wants feedback on)
    revision_of: uuid (if resubmission)

// Accountability Pods (CRITICAL for 4x completion improvement)
accountability_pods:
    id: uuid PRIMARY KEY
    name: text
    stage: enum('idea', 'validation', 'growth', 'scale')
    max_members: int DEFAULT 4
    created_at: timestamptz
    discord_channel_id: text (if using Discord)

pod_members:
    pod_id: uuid REFERENCES accountability_pods(id)
    user_id: uuid REFERENCES auth.users(id)
    joined_at: timestamptz
    status: enum('active', 'inactive')
    PRIMARY KEY (pod_id, user_id)

pod_check_ins:
    id: uuid PRIMARY KEY
    pod_id: uuid REFERENCES accountability_pods(id)
    user_id: uuid REFERENCES auth.users(id)
    week_of: date NOT NULL
    progress_summary: text
    blockers: text
    wins: text
    created_at: timestamptz

// Business Milestones (CRITICAL for outcome tracking)
business_milestones:
    id: uuid PRIMARY KEY
    user_id: uuid REFERENCES auth.users(id)
    milestone_type: enum('first_customer', 'first_revenue', 'first_1k_mrr', 'first_10k_mrr', 'pmf_achieved', 'profitability')
    achieved_at: timestamptz DEFAULT now()
    evidence_url: text (Stripe transaction, screenshot, etc.)
    verified: boolean DEFAULT false
    celebration_shown: boolean DEFAULT false
    reflection: text (what they learned)

// Community Features (In-App + NodeBB)
lesson_discussions:
    id: uuid PRIMARY KEY
    lesson_id: uuid REFERENCES lessons(id)
    user_id: uuid REFERENCES auth.users(id)
    parent_id: uuid REFERENCES lesson_discussions(id) (for threading)
    content: text NOT NULL
    is_helpful: boolean DEFAULT false (marked by instructors)
    created_at: timestamptz
    updated_at: timestamptz

exercise_showcases:
    id: uuid PRIMARY KEY
    submission_id: uuid REFERENCES submissions(id)
    user_id: uuid REFERENCES auth.users(id)
    showcase_description: text
    created_at: timestamptz

peer_feedback:
    id: uuid PRIMARY KEY
    showcase_id: uuid REFERENCES exercise_showcases(id)
    reviewer_id: uuid REFERENCES auth.users(id)
    feedback_type: enum('strength', 'improvement', 'question')
    content: text NOT NULL
    helpful_count: int DEFAULT 0
    created_at: timestamptz

// Gamification System
user_achievements:
    id: uuid PRIMARY KEY
    user_id: uuid REFERENCES auth.users(id)
    achievement_type: enum('streak_7', 'streak_30', 'first_customer', 'first_revenue', 'sc1_master', 'framework_builder')
    earned_at: timestamptz DEFAULT now()
    notification_shown: boolean DEFAULT false

activity_log:
    id: uuid PRIMARY KEY
    user_id: uuid REFERENCES auth.users(id)
    activity_type: enum('lesson_completed', 'exercise_submitted', 'milestone_achieved', 'community_contribution')
    points_earned: int
    metadata: jsonb
    created_at: timestamptz

// Enrollment & Payments
enrollments:
    id: uuid PRIMARY KEY
    user_id: uuid REFERENCES auth.users(id)
    course_id: uuid REFERENCES courses(id)
    enrolled_at: timestamptz DEFAULT now()
    payment_status: enum('pending', 'paid', 'refunded')
    stripe_payment_id: text
    amount_paid: decimal
    access_expires_at: timestamptz (NULL for lifetime access)

// Re-engagement System
engagement_triggers:
    id: uuid PRIMARY KEY
    user_id: uuid REFERENCES auth.users(id)
    trigger_type: enum('2_day_inactive', '7_day_inactive', '14_day_inactive', '30_day_inactive', 'exercise_not_completed')
    triggered_at: timestamptz
    action_taken: text (email sent, notification, etc.)
    resolved: boolean DEFAULT false
```

### Row Level Security (RLS) Policies

**CRITICAL**: ALL tables MUST have RLS enabled. Data security is non-negotiable.

```sql
-- Example RLS policies (apply similar patterns to all tables)

-- Users can only read their own profile
CREATE POLICY "Users can view own profile"
  ON user_profiles FOR SELECT
  TO authenticated
  USING (auth.uid() = user_id);

-- Users can update their own profile
CREATE POLICY "Users can update own profile"
  ON user_profiles FOR UPDATE
  TO authenticated
  USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);

-- Anyone can view published courses
CREATE POLICY "Anyone can view published courses"
  ON courses FOR SELECT
  TO authenticated
  USING (status = 'published');

-- Users can only view lessons from enrolled courses
CREATE POLICY "Users view enrolled course lessons"
  ON lessons FOR SELECT
  TO authenticated
  USING (
    EXISTS (
      SELECT 1 FROM enrollments
      WHERE enrollments.user_id = auth.uid()
      AND enrollments.course_id = lessons.course_id
      AND enrollments.payment_status = 'paid'
    )
  );

-- Users can manage their own progress
CREATE POLICY "Users manage own progress"
  ON user_progress FOR ALL
  TO authenticated
  USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);

-- Pod members can view pod activity
CREATE POLICY "Pod members view pod check-ins"
  ON pod_check_ins FOR SELECT
  TO authenticated
  USING (
    EXISTS (
      SELECT 1 FROM pod_members
      WHERE pod_members.pod_id = pod_check_ins.pod_id
      AND pod_members.user_id = auth.uid()
      AND pod_members.status = 'active'
    )
  );
```

---

## AI-POWERED FEATURES (Gemini 2.5 Pro)

### 1. Strategic Framework Coach (Multi-Turn Socratic Dialogue)

**Purpose**: Guide founders through applying strategic frameworks to their specific business with deep, probing questions.

**Edge Function**: `supabase/functions/ai-coach-chat/index.ts`

```typescript
import { serve } from 'https://deno.land/std@0.168.0/http/server.ts';
import { GoogleGenerativeAI } from 'npm:@google/generative-ai@0.2.1';

const genAI = new GoogleGenerativeAI(Deno.env.get('GEMINI_API_KEY') || '');

serve(async (req) => {
  const {
    frameworkName,
    userSituation,
    conversationHistory,
    exerciseContext
  } = await req.json();

  const model = genAI.getGenerativeModel({ model: 'gemini-2.5-pro' });

  const prompt = `You are a strategic advisor helping a solo founder apply the ${frameworkName} framework.

TEACHING APPROACH:
1. Explain each concept thoroughly with context and examples
2. Ask Socratic questions to deepen thinking (not just surface-level)
3. Reference successful bootstrapped founders and their approaches
4. Connect frameworks to business outcomes and metrics
5. Challenge assumptions respectfully
6. Celebrate insights and progress

CRITICAL: This is TEACHING, not task management. Build strategic understanding, not just compliance.

USER SITUATION: ${userSituation}
EXERCISE CONTEXT: ${exerciseContext}
CONVERSATION HISTORY: ${JSON.stringify(conversationHistory)}

Your response should:
- Explain WHY this step matters strategically
- Provide a concrete example from a similar founder journey
- Ask 2-3 probing questions that force deeper thinking
- Offer alternative approaches when relevant
- Connect to their specific business goals

Tone: Encouraging but intellectually rigorous. High standards, high support.`;

  const result = await model.generateContent(prompt);
  const response = result.response.text();

  return new Response(
    JSON.stringify({ response }),
    { headers: { 'Content-Type': 'application/json' } }
  );
});
```

### 2. Strategic Thinking Evaluator (Exercise Grading)

**Purpose**: Assess depth and quality of strategic thinking, not just correctness.

**Edge Function**: `supabase/functions/evaluate-exercise/index.ts`

```typescript
const prompt = `Evaluate the depth and quality of strategic thinking in this exercise submission.

EXERCISE: ${exercisePrompt}
USER RESPONSE: ${userResponse}
FRAMEWORK: ${frameworkName}
USER CONTEXT: ${userBusinessStage}, ${userIndustry}

EVALUATION DIMENSIONS:

1. DEPTH OF THINKING (0-100):
- Surface level (0-40): Lists obvious points, no analysis
- Developing (41-65): Shows some analysis, limited framework application
- Proficient (66-85): Applies frameworks well, considers alternatives
- Strategic (86-100): Multi-layered analysis, original insights, first principles thinking

2. FRAMEWORK APPLICATION (0-100):
- Correct understanding of framework concepts
- Adapted to specific context (not just repeated)
- Tradeoffs and limitations acknowledged
- Evidence of iterative thinking

3. STRATEGIC REASONING (0-100):
- "Why" thinking, not just "what"
- Second-order effects considered
- Connection to business outcomes
- Recognition of assumptions and risks
- Alternative scenarios explored

Provide:
- Numeric scores with specific justification
- 3-5 concrete strengths (what they did well)
- 2-4 improvement areas with actionable guidance
- Specific next steps to deepen thinking
- Encouragement while maintaining high standards

This is formative assessment - help them grow, don't just grade.`;
```

### 3. Document Critique Tool (Multimodal Analysis)

**Purpose**: Analyze pitch decks, landing pages, business plans using vision + text.

**Edge Function**: `supabase/functions/analyze-document/index.ts`

```typescript
// Accepts images + text for multimodal analysis
const prompt = `Analyze this [pitch deck/landing page/business plan] for a bootstrapped startup.

FOUNDER CONTEXT: ${founderStage}, ${industry}, ${currentChallenge}

ANALYSIS FRAMEWORK:
1. Structure & Flow: Logical narrative? Effective ordering?
2. Problem-Solution Clarity: Visceral problem? Obvious solution?
3. Market Understanding: Credible TAM? Well-defined niche?
4. Traction & Proof: Honest metrics? Achievable milestones?
5. Visual Communication: Do visuals enhance or distract?
6. Founder Authority: Does this establish credibility?

For EACH slide/section:
- Rate clarity 0-100
- Identify specific improvements
- Explain WHY changes would strengthen the work
- Provide examples of better approaches

Focus on BOOTSTRAPPER concerns:
- Capital efficiency messaging
- Customer validation over VC appeal
- Profitability path clarity
- Realistic timelines
- Founder capability demonstration

Provide strategic, not superficial, feedback. Teach strategy, don't just critique.`;
```

---

## COMMUNITY & PEER LEARNING SYSTEM (HYBRID APPROACH)

### Architecture: Three-Layer Community

**Layer 1: In-App Features (Lightweight, Integrated)**
- Lesson discussion threads (per lesson)
- Exercise showcases (share work publicly)
- Peer feedback on submissions
- Milestone celebrations

**Layer 2: NodeBB Forum (VPS-Hosted, Professional)**
- Course-specific categories
- Long-form discussions
- Knowledge base / FAQs
- Searchable archive
- SSO with JWT from Supabase

**Layer 3: Discord (Real-Time, Optional)**
- Accountability pod channels
- Live events and Q&A
- Quick questions
- Social bonding

### NodeBB Integration

**VPS Setup**: DigitalOcean $6/month droplet, Ubuntu 22.04, Node.js 18, MongoDB

**SSO Implementation**:

```typescript
// Edge Function: generate-forum-token
import * as jose from 'https://deno.land/x/jose@v4.14.4/index.ts';

serve(async (req) => {
  const { user } = await authenticateRequest(req);

  // Generate JWT for NodeBB
  const secret = new TextEncoder().encode(Deno.env.get('NODEBB_JWT_SECRET'));

  const jwt = await new jose.SignJWT({
    id: user.id,
    username: user.email?.split('@')[0],
    email: user.email,
    fullname: user.full_name,
    picture: user.avatar_url,
  })
    .setProtectedHeader({ alg: 'HS256' })
    .setIssuedAt()
    .setExpirationTime('24h')
    .sign(secret);

  return new Response(
    JSON.stringify({
      token: jwt,
      forumUrl: Deno.env.get('NODEBB_URL')
    }),
    { headers: { 'Content-Type': 'application/json' } }
  );
});
```

**Forum Categories**:
- Announcements (admin only)
- Course Discussions (subcategories per course)
- Show Your Work (exercise showcases)
- Milestone Celebrations
- Accountability Pods (private channels)
- General (introductions, off-topic)

**NodeBB API Integration**:
- Auto-create discussion threads for new lessons
- Auto-post milestone celebrations
- Fetch recent activity for dashboard widget

### In-App Community Components

```tsx
// src/components/LessonDiscussion.tsx
export function LessonDiscussion({ lessonId }: { lessonId: string }) {
  const [comments, setComments] = useState<Comment[]>([]);

  // Threaded comments with @mentions
  // Markdown support
  // Real-time updates via Supabase Realtime

  return (
    <div className="bg-white rounded-lg border p-6">
      <h3 className="font-bold text-slate-900 mb-4">Discussion</h3>
      <CommentComposer onSubmit={handleCommentSubmit} />
      <CommentList comments={comments} />
    </div>
  );
}

// src/components/ExerciseShowcase.tsx
export function ExerciseShowcase({ courseId }: { courseId: string }) {
  // Public gallery of submitted work
  // Filter by exercise type
  // Request specific feedback
  // Give peer feedback

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
      {showcases.map(showcase => (
        <ShowcaseCard
          key={showcase.id}
          submission={showcase.submission}
          author={showcase.user}
          feedbackRequest={showcase.feedback_request}
          peerFeedback={showcase.peer_feedback}
        />
      ))}
    </div>
  );
}
```

---

## ACCOUNTABILITY POD SYSTEM (CRITICAL FOR COMPLETION)

### The Problem
Self-paced courses: 3-15% completion rate
Cohort-based: 85%+ completion but doesn't scale
**Solution**: Async accountability pods (4x completion improvement)

### Pod Mechanics

**Formation**:
- Auto-match on signup or week 1
- 3-4 members per pod
- Matched by stage (idea, validation, growth)
- Optional: manual selection of pod mates

**Structure**:
- Weekly check-ins (async, not live)
- Private Discord channel or forum category
- Monthly sync video call (optional)

**Check-In Template**:
```
Week of [Date]:

âœ… What I accomplished this week:
- [Specific wins, no matter how small]

ðŸŽ¯ What I'm working on next:
- [Concrete goals for next 7 days]

ðŸš§ Where I'm stuck:
- [Specific blockers or questions]

ðŸ’¬ How pods can help:
- [Specific asks: feedback, advice, accountability]
```

**Implementation**:

```typescript
// Cloud Function: Match pods every Monday
export const matchAccountabilityPods = async () => {
  // Get unmatched users who enrolled in last week
  const unmatchedUsers = await supabase
    .from('user_profiles')
    .select('*')
    .is('pod_id', null)
    .gte('enrolled_at', oneWeekAgo);

  // Group by stage
  const grouped = groupByStage(unmatchedUsers);

  // Create pods of 3-4
  for (const [stage, users] of Object.entries(grouped)) {
    const pods = chunk(users, 4);

    for (const podMembers of pods) {
      // Create pod
      const { data: pod } = await supabase
        .from('accountability_pods')
        .insert({ stage, max_members: 4 })
        .select()
        .single();

      // Add members
      await supabase.from('pod_members').insert(
        podMembers.map(user => ({
          pod_id: pod.id,
          user_id: user.user_id,
        }))
      );

      // Create Discord channel or NodeBB category
      await createPodChannel(pod.id, podMembers);

      // Send welcome email
      await sendPodWelcomeEmail(podMembers, pod.id);
    }
  }
};

// Weekly reminder function
export const sendWeeklyCheckInReminder = async () => {
  // Every Monday 9am, remind pods to check in
  const activePods = await supabase
    .from('accountability_pods')
    .select('*, pod_members(user_id, user_profiles(*))');

  for (const pod of activePods) {
    // Check if anyone hasn't checked in yet this week
    const thisWeek = startOfWeek(new Date());
    const checkIns = await supabase
      .from('pod_check_ins')
      .select('user_id')
      .eq('pod_id', pod.id)
      .gte('week_of', thisWeek);

    const checkedInUsers = new Set(checkIns.map(c => c.user_id));
    const needsReminder = pod.pod_members.filter(
      m => !checkedInUsers.has(m.user_id)
    );

    if (needsReminder.length > 0) {
      await sendCheckInReminder(needsReminder);
    }
  }
};
```

**UI Components**:

```tsx
// src/pages/MyPod.tsx
export function MyPod() {
  const { user } = useAuth();
  const { pod, members, checkIns } = usePodData(user.id);

  return (
    <div className="max-w-4xl mx-auto px-4 py-8">
      <h1 className="text-3xl font-bold mb-8">My Accountability Pod</h1>

      {/* Pod members cards */}
      <div className="grid grid-cols-3 gap-4 mb-8">
        {members.map(member => (
          <PodMemberCard
            key={member.id}
            member={member}
            currentFocus={member.current_focus}
            weeklyProgress={member.weekly_progress}
          />
        ))}
      </div>

      {/* This week's check-in */}
      <div className="bg-white rounded-lg border p-6 mb-8">
        <h2 className="font-bold mb-4">This Week's Check-In</h2>
        <CheckInForm podId={pod.id} />
      </div>

      {/* Activity feed */}
      <div>
        <h2 className="font-bold mb-4">Pod Activity</h2>
        <PodActivityFeed checkIns={checkIns} />
      </div>
    </div>
  );
}
```

---

## BUSINESS MILESTONE TRACKING (OUTCOME FOCUS)

### Why This Matters
**Current problem**: Platforms track lesson completion, not real outcomes
**Our approach**: Track and celebrate actual business progress

### Milestone Types

```typescript
enum MilestoneType {
  // Research Phase
  COMPLETED_SALES_SAFARI = 'completed_sales_safari',
  DEFINED_ICP = 'defined_icp',
  CONDUCTED_10_INTERVIEWS = 'conducted_10_interviews',

  // Validation Phase
  BUILT_LANDING_PAGE = 'built_landing_page',
  GOT_50_SIGNUPS = 'got_50_signups',
  GOT_FIRST_PRESALE = 'got_first_presale',

  // Build Phase
  LAUNCHED_MVP = 'launched_mvp',
  FIRST_CUSTOMER = 'first_customer',
  FIVE_ACTIVE_USERS = 'five_active_users',

  // Revenue Milestones
  FIRST_REVENUE = 'first_revenue', // $1+
  FIRST_100_REVENUE = 'first_100_revenue',
  FIRST_1K_MRR = 'first_1k_mrr',
  FIRST_10K_MRR = 'first_10k_mrr',

  // Growth Milestones
  PMF_ACHIEVED = 'pmf_achieved', // 40%+ "very disappointed"
  PROFITABILITY = 'profitability',
  QUIT_DAY_JOB = 'quit_day_job',
}
```

### Milestone Tracking Flow

**User-Initiated**:
```tsx
// src/components/MilestoneModal.tsx
export function MilestoneModal({ isOpen, onClose }: Props) {
  const [milestoneType, setMilestoneType] = useState('');
  const [evidence, setEvidence] = useState('');
  const [reflection, setReflection] = useState('');

  const handleSubmit = async () => {
    await supabase.from('business_milestones').insert({
      user_id: user.id,
      milestone_type: milestoneType,
      evidence_url: evidence,
      reflection: reflection,
      verified: false, // Admin reviews
    });

    // Award points
    await awardPoints(user.id, 'milestone_achieved', { type: milestoneType });

    // Show celebration animation
    showConfetti();

    // Post to community
    await postMilestoneToCommunity(milestoneType, user, reflection);
  };

  return (
    <Modal isOpen={isOpen} onClose={onClose}>
      <h2 className="text-2xl font-bold mb-4">ðŸŽ‰ Celebrate a Milestone!</h2>

      <select value={milestoneType} onChange={e => setMilestoneType(e.target.value)}>
        <option value="">Select milestone...</option>
        <option value="first_customer">Got my first customer!</option>
        <option value="first_revenue">Made my first dollar!</option>
        <option value="first_1k_mrr">Reached $1K MRR!</option>
        {/* ... */}
      </select>

      <input
        type="url"
        placeholder="Evidence link (Stripe, screenshot, etc.)"
        value={evidence}
        onChange={e => setEvidence(e.target.value)}
      />

      <textarea
        placeholder="What did you learn getting here? What was hardest?"
        value={reflection}
        onChange={e => setReflection(e.target.value)}
        rows={4}
      />

      <button onClick={handleSubmit}>Share Milestone</button>
    </Modal>
  );
}
```

**Automatic Detection** (where possible):
```typescript
// Stripe webhook integration
export const detectRevenueMilestones = async (stripeEvent: Stripe.Event) => {
  if (stripeEvent.type === 'payment_intent.succeeded') {
    const payment = stripeEvent.data.object;
    const userId = payment.metadata.user_id;

    // Check if this is first revenue
    const existingRevenue = await supabase
      .from('business_milestones')
      .select('id')
      .eq('user_id', userId)
      .eq('milestone_type', 'first_revenue')
      .maybeSingle();

    if (!existingRevenue) {
      await supabase.from('business_milestones').insert({
        user_id: userId,
        milestone_type: 'first_revenue',
        achieved_at: new Date(),
        evidence_url: `stripe:${payment.id}`,
        verified: true, // Auto-verified from Stripe
      });

      // Trigger celebration
      await triggerMilestoneCelebration(userId, 'first_revenue');
    }

    // Check MRR thresholds
    const totalRevenue = await calculateMRR(userId);
    if (totalRevenue >= 1000) {
      await checkAndAwardMilestone(userId, 'first_1k_mrr');
    }
  }
};
```

**Dashboard Display**:
```tsx
// src/components/MilestoneTimeline.tsx
export function MilestoneTimeline({ userId }: { userId: string }) {
  const { milestones } = useMilestones(userId);

  return (
    <div className="bg-white rounded-lg border p-6">
      <h3 className="font-bold mb-6">Your Journey</h3>

      <div className="relative">
        {/* Vertical timeline */}
        <div className="absolute left-4 top-0 bottom-0 w-0.5 bg-slate-200" />

        {milestones.map((milestone, idx) => (
          <div key={milestone.id} className="relative pl-12 pb-8">
            <div className="absolute left-0 w-8 h-8 rounded-full bg-green-500 flex items-center justify-center">
              <CheckCircle className="h-5 w-5 text-white" />
            </div>

            <div className="bg-green-50 rounded-lg p-4">
              <div className="flex items-start justify-between mb-2">
                <h4 className="font-bold text-slate-900">
                  {getMilestoneTitle(milestone.milestone_type)}
                </h4>
                <span className="text-sm text-slate-600">
                  {formatDate(milestone.achieved_at)}
                </span>
              </div>

              {milestone.reflection && (
                <p className="text-sm text-slate-700 mt-2">
                  "{milestone.reflection}"
                </p>
              )}

              {milestone.evidence_url && (
                <a
                  href={milestone.evidence_url}
                  target="_blank"
                  className="text-sm text-blue-600 hover:text-blue-700 mt-2 inline-block"
                >
                  View evidence â†’
                </a>
              )}
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}
```

---

## SOFT ENCOURAGEMENT (NOT HARD GATES)

### Philosophy
Users can skip exercises and move forward, but we **strongly encourage** completion through:
1. Clear visual indicators of skipped work
2. Gentle AI coach nudges
3. Progress dashboard warnings
4. Pod accountability (peers see your progress)

### Implementation

**Before Next Lesson**:
```tsx
// src/pages/LessonPlayer.tsx
{!exerciseCompleted && nextLesson && (
  <div className="bg-amber-50 border-l-4 border-amber-500 p-4 mb-6">
    <div className="flex items-start gap-3">
      <AlertCircle className="h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5" />
      <div>
        <p className="font-medium text-amber-900">
          Exercise not yet completed
        </p>
        <p className="text-sm text-amber-700 mt-1">
          You'll get more value from the next lesson if you complete this
          exercise first. It only takes 15-20 minutes.
        </p>
        <button
          onClick={() => scrollToExercise()}
          className="mt-3 text-amber-700 underline text-sm font-medium"
        >
          Complete exercise now â†’
        </button>
        <button
          onClick={() => navigateToNextLesson()}
          className="mt-3 ml-4 text-amber-600 text-sm"
        >
          Continue anyway
        </button>
      </div>
    </div>
  </div>
)}
```

**Dashboard Progress View**:
```tsx
// src/pages/Dashboard.tsx
<div className="bg-white rounded-lg border p-6">
  <h3 className="font-bold mb-4">Your Learning Path</h3>

  <div className="space-y-3">
    {lessons.map(lesson => {
      const completed = progress.completed_lessons.includes(lesson.id);
      const current = progress.current_lesson_id === lesson.id;
      const hasExercise = lesson.content_type === 'exercise';
      const exerciseCompleted = completed && hasExercise;

      return (
        <div
          key={lesson.id}
          className={`flex items-center gap-3 ${!completed && 'opacity-50'}`}
        >
          {completed ? (
            <CheckCircle className="h-5 w-5 text-green-600" />
          ) : current ? (
            <Circle className="h-5 w-5 text-blue-600" />
          ) : (
            <Circle className="h-5 w-5 text-slate-400" />
          )}

          <div className="flex-1">
            <span className={completed ? 'text-slate-700' : 'text-slate-400'}>
              {lesson.title}
            </span>

            {hasExercise && !exerciseCompleted && completed && (
              <span className="text-amber-600 text-sm ml-2">
                (Exercise recommended before continuing)
              </span>
            )}
          </div>
        </div>
      );
    })}
  </div>
</div>
```

**AI Coach Gentle Nudge**:
```typescript
// When user skips exercise
const generateNudge = async (context: {
  skippedExercise: string;
  nextLesson: string;
  userStage: string;
}) => {
  const prompt = `The user is moving from "${context.skippedExercise}" to
"${context.nextLesson}" without completing the exercise. They're at the
${context.userStage} stage.

Generate a gentle, encouraging nudge that:
1. Acknowledges their choice (no judgment)
2. Explains specific value they'll miss
3. Offers to come back anytime
4. Asks if they want guidance now or later

Tone: Supportive, not pushy. 2-3 sentences max.`;

  const response = await geminiGenerate(prompt);
  return response;
};

// Example output:
// "I notice you're moving to Customer Research without completing the ICP
// Framework exercise. That's totally fine - you can come back to it anytime.
// But here's why I recommend doing it first: the research plan in the next
// lesson will be much easier to build if you have a clear ICP. Want to
// tackle it now, or would you prefer to continue and circle back?"
```

---

## RE-ENGAGEMENT AUTOMATION

### Trigger-Based Intervention System

**Trigger Points**:
- 2 days inactive â†’ Friendly check-in
- 7 days inactive â†’ Personal email from instructor
- 14 days inactive â†’ Offer help/support
- 30 days inactive â†’ "Should we pause?" decision point

**Implementation**:

```typescript
// supabase/functions/engagement-monitor/index.ts

export const checkEngagementStatus = async () => {
  const now = new Date();

  // Get all enrolled users
  const { data: users } = await supabase
    .from('user_stats')
    .select('user_id, last_activity_at, user_profiles(email, full_name)');

  for (const user of users) {
    const daysSinceActivity = differenceInDays(
      now,
      new Date(user.last_activity_at)
    );

    // Check if we've already sent this trigger
    const { data: existingTrigger } = await supabase
      .from('engagement_triggers')
      .select('id')
      .eq('user_id', user.user_id)
      .eq('trigger_type', `${daysSinceActivity}_day_inactive`)
      .gte('triggered_at', subDays(now, daysSinceActivity))
      .maybeSingle();

    if (existingTrigger) continue; // Already sent

    // Send appropriate intervention
    if (daysSinceActivity === 2) {
      await send2DayCheckIn(user);
    } else if (daysSinceActivity === 7) {
      await send7DayPersonalEmail(user);
    } else if (daysSinceActivity === 14) {
      await send14DayOfferHelp(user);
    } else if (daysSinceActivity === 30) {
      await send30DayDecisionPoint(user);
    }

    // Log trigger
    await supabase.from('engagement_triggers').insert({
      user_id: user.user_id,
      trigger_type: `${daysSinceActivity}_day_inactive`,
      action_taken: 'email_sent',
    });
  }
};

// Email templates
const send2DayCheckIn = async (user: User) => {
  await sendEmail({
    to: user.email,
    subject: "Quick question about your course...",
    body: `
      Hi ${user.full_name},

      I noticed you haven't been back to the course in a couple days.
      Everything okay?

      Getting started is often the hardest part. Here's a tip: just commit
      to 15 minutes today. That's it.

      ${getLinkToNextLesson(user)}

      You've already invested in yourself by enrolling. Don't let that
      investment sit idle.

      Rooting for you,
      [Instructor Name]
    `
  });
};

const send7DayPersonalEmail = async (user: User) => {
  // Personal email from instructor
  // More detailed, more empathetic
  // Offer specific help
};

const send14DayOfferHelp = async (user: User) => {
  // "What's blocking you?" email
  // Offer 1:1 call or async help
  // Share common challenges and solutions
};

const send30DayDecisionPoint = async (user: User) => {
  // Honest conversation about timing
  // Option to pause enrollment
  // Option to get refund (if within guarantee)
  // Option to recommit with support
};
```

---

## GAMIFICATION SYSTEM

### Points & Levels

**Point Awards**:
```typescript
enum ActivityType {
  LESSON_COMPLETED = 'lesson_completed', // 5 pts
  EXERCISE_SUBMITTED = 'exercise_submitted', // 10 pts
  EXERCISE_HIGH_SCORE = 'exercise_high_score', // +10 pts (90+ score)
  COMMUNITY_CONTRIBUTION = 'community_contribution', // 10 pts
  PEER_FEEDBACK_GIVEN = 'peer_feedback_given', // 5 pts
  WEEKLY_CHECK_IN = 'weekly_check_in', // 5 pts
  STREAK_BONUS = 'streak_bonus', // 5 pts per week
  MILESTONE_ACHIEVED = 'milestone_achieved', // 25-100 pts depending on milestone
  COURSE_COMPLETED = 'course_completed', // 50 pts
}

const POINT_VALUES = {
  [ActivityType.LESSON_COMPLETED]: 5,
  [ActivityType.EXERCISE_SUBMITTED]: 10,
  [ActivityType.EXERCISE_HIGH_SCORE]: 10,
  [ActivityType.COMMUNITY_CONTRIBUTION]: 10,
  [ActivityType.PEER_FEEDBACK_GIVEN]: 5,
  [ActivityType.WEEKLY_CHECK_IN]: 5,
  [ActivityType.STREAK_BONUS]: 5,
  [ActivityType.MILESTONE_ACHIEVED]: 50, // Variable
  [ActivityType.COURSE_COMPLETED]: 50,
};
```

**Levels**:
```typescript
const LEVELS = [
  {
    name: 'Aspiring Founder',
    pointsRequired: 0,
    benefits: ['Access to Foundation courses', 'Community access'],
    icon: 'Sprout',
  },
  {
    name: 'Validated Founder',
    pointsRequired: 100,
    benefits: ['Monthly Q&A access', 'Featured in community', 'Beta course access'],
    icon: 'Leaf',
  },
  {
    name: 'Revenue-Stage Founder',
    pointsRequired: 300,
    benefits: ['Growth courses unlocked', 'Mastermind consideration'],
    icon: 'TreeDeciduous',
  },
  {
    name: 'Scaling Founder',
    pointsRequired: 700,
    benefits: ['Elite courses unlocked', 'Speaking opportunities'],
    icon: 'TreePine',
  },
  {
    name: 'Master Builder',
    pointsRequired: 1500,
    benefits: ['Lifetime access', 'Affiliate program', 'Co-teaching opportunities'],
    icon: 'Trophy',
  },
];
```

**Badges**:
```typescript
const BADGES = [
  // Competency mastery
  { id: 'sc1_master', name: 'Market Validation Master', criteria: 'SC1 score 90+' },

  // Real-world achievements
  { id: 'first_customer', name: 'First Customer', criteria: 'Got first customer' },
  { id: 'first_revenue', name: 'First Dollar', criteria: 'Made first revenue' },
  { id: 'first_1k_mrr', name: '$1K MRR', criteria: 'Reached $1K MRR' },

  // Consistency
  { id: 'week_streak', name: '7-Day Streak', criteria: '7 days active' },
  { id: 'month_streak', name: '30-Day Streak', criteria: '30 days active' },

  // Community
  { id: 'helpful_peer', name: 'Helpful Peer', criteria: '10+ helpful feedbacks' },
  { id: 'framework_builder', name: 'Framework Builder', criteria: '10+ frameworks built' },
];
```

---

## PAYMENT & ENROLLMENT

### Stripe Integration

```typescript
// supabase/functions/create-checkout-session/index.ts

serve(async (req) => {
  const { courseId, priceId, userId } = await req.json();

  const stripe = new Stripe(Deno.env.get('STRIPE_SECRET_KEY') || '');

  const session = await stripe.checkout.sessions.create({
    customer_email: user.email,
    client_reference_id: userId,
    payment_method_types: ['card'],
    mode: 'payment', // or 'subscription' for installments

    line_items: [{
      price: priceId,
      quantity: 1,
    }],

    success_url: `${Deno.env.get('APP_URL')}/courses/${courseSlug}/welcome?session_id={CHECKOUT_SESSION_ID}`,
    cancel_url: `${Deno.env.get('APP_URL')}/courses/${courseSlug}`,

    metadata: {
      userId,
      courseId,
    },
  });

  return new Response(
    JSON.stringify({ sessionUrl: session.url }),
    { headers: { 'Content-Type': 'application/json' } }
  );
});

// Webhook handler
// supabase/functions/stripe-webhook/index.ts

serve(async (req) => {
  const signature = req.headers.get('stripe-signature');
  const body = await req.text();

  let event: Stripe.Event;
  try {
    event = stripe.webhooks.constructEvent(
      body,
      signature!,
      Deno.env.get('STRIPE_WEBHOOK_SECRET') || ''
    );
  } catch (err) {
    return new Response('Webhook signature verification failed', { status: 400 });
  }

  if (event.type === 'checkout.session.completed') {
    const session = event.data.object as Stripe.Checkout.Session;
    const { userId, courseId } = session.metadata;

    // Create enrollment
    await supabase.from('enrollments').insert({
      user_id: userId,
      course_id: courseId,
      payment_status: 'paid',
      stripe_payment_id: session.payment_intent,
      amount_paid: session.amount_total / 100,
    });

    // Initialize progress tracking
    await supabase.from('user_progress').insert({
      user_id: userId,
      course_id: courseId,
      completion_percentage: 0,
    });

    // Award points
    await awardPoints(userId, ActivityType.COURSE_ENROLLED);

    // Add to next accountability pod
    await addToUpcomingPod(userId);

    // Send welcome email
    await sendWelcomeEmail(userId, courseId);
  }

  return new Response(JSON.stringify({ received: true }));
});
```

---

## UI/UX DESIGN REQUIREMENTS

### Design Principles

**Content-Rich, Calm Aesthetic**:
- Typography: Inter for body, Poppins for headings
- Color palette: Deep blues (#0F172A, #1E3A8A), cool grays (#64748B), warm accents (#F59E0B, #10B981)
- Ample white space (min 60px vertical spacing)
- Dark mode support
- No purple/indigo unless specifically requested

**Focus on Outcomes, Not Features**:
- Headlines state transformations, not tools
- Copy emphasizes "what you'll achieve" not "what you'll learn"
- Real founder examples throughout
- Honest about effort required

**Learning-First Interface**:
- No artificial urgency or countdown timers
- "Continue learning" prompts, not manipulation
- Progress saved automatically with visual confirmation
- Estimated time shown clearly upfront
- Reflection checkpoints with thoughtful pauses

### Key Pages

**1. Homepage** (`src/pages/Home.tsx`):
- Hero: Clear value proposition, social proof, CTA
- Three-tier course preview
- Founder credibility section
- How it works
- FAQ

**2. Course Catalog** (`src/pages/CourseCatalog.tsx`):
- Filters: stage, competency, track, price
- Course cards with thumbnail, competencies, prerequisites
- Sort options

**3. Course Detail** (`src/pages/CourseDetail.tsx`):
- Tabs: Overview, Curriculum, Instructor, Reviews, FAQs
- Promo video
- Full lesson breakdown
- Sample lesson preview

**4. Lesson Player** (`src/pages/LessonPlayer.tsx`):
- Sidebar: course navigation, progress ring
- Main content: conditional rendering by lesson type
- Notes panel: personal notes, bookmarks, AI takeaways
- Discussion tab: lesson-specific threads

**5. Exercise Interface** (`src/components/ExerciseTemplateRenderer.tsx`):
- Exercise prompt with rubric shown upfront
- Rich text editor with autosave
- AI coaching chat (side panel)
- Submit for evaluation
- Feedback display with scores and guidance

**6. Student Dashboard** (`src/pages/Dashboard.tsx`):
- Welcome section with streak
- Progress overview (enrolled courses)
- Competency radar chart
- Milestone timeline
- Recent activity
- Recommended next courses
- Pod quick access
- Community highlights

**7. Accountability Pod** (`src/pages/MyPod.tsx`):
- Pod member cards with current focus
- Weekly check-in form
- Activity feed
- Link to Discord channel or forum category

**8. Community** (`src/pages/Community.tsx`):
- Recent forum activity widget
- Exercise showcase gallery
- Milestone celebrations feed
- Link to full forum (NodeBB)
- Link to Discord

---

## IMPLEMENTATION PRIORITIES

### Phase 1: MVP Foundation (Weeks 1-4)
1. âœ… Supabase setup with core schema
2. âœ… User authentication (email/password + Google OAuth)
3. âœ… Course catalog and detail pages
4. âœ… Lesson player (video + article types)
5. âœ… Progress tracking
6. âœ… Basic dashboard
7. Stripe checkout and enrollment
8. Welcome email sequence

### Phase 2: AI Features (Weeks 5-6)
1. AI strategic coach chat (Edge Function)
2. Exercise evaluation flow (Edge Function)
3. AI-generated lesson summaries
4. Error handling and rate limiting

### Phase 3: Community (Weeks 7-8)
1. Lesson discussion threads (in-app)
2. Exercise showcase feature (in-app)
3. NodeBB VPS setup and SSO integration
4. Discord server structure and integration
5. Recent activity widgets

### Phase 4: Accountability & Engagement (Weeks 9-10)
1. Accountability pod matching algorithm
2. Weekly check-in system
3. Pod dashboard and UI
4. Re-engagement trigger system (2/7/14/30 day)
5. Email automation for inactive users

### Phase 5: Milestones & Gamification (Weeks 11-12)
1. Business milestone tracking
2. Milestone celebration UI
3. Points and levels system
4. Badge awards
5. Leaderboard (opt-in)
6. Automated milestone detection (Stripe integration)

### Phase 6: Polish & Launch Prep (Weeks 13-14)
1. Content upload (first course)
2. End-to-end testing
3. Analytics integration
4. Admin dashboard (basic metrics)
5. Landing page optimization
6. Beta tester onboarding

---

## CRITICAL SUCCESS FACTORS

1. **Completion rate > 60%**: Achieved through accountability pods + milestone focus + soft encouragement
2. **Real business outcomes**: Track first customers, first revenue, not just course progress
3. **AI coaching quality**: Must genuinely deepen thinking, not just validate answers
4. **Community engagement**: 3-layer approach (in-app + NodeBB + Discord) ensures multiple touchpoints
5. **Strategic depth**: Frameworks over tactics, explanation over action items
6. **Fast iteration**: Launch with one great course, expand based on real student needs

---

## TECHNICAL NOTES

- **Database**: Supabase PostgreSQL with RLS enabled on ALL tables
- **Auth**: Supabase Auth with email/password + Google OAuth
- **Storage**: Supabase Storage for course videos, images, downloadable resources
- **Edge Functions**: Deno runtime for AI integrations, webhooks, scheduled tasks
- **AI**: Google Gemini 2.5 Pro via REST API (not Genkit - simpler for MVP)
- **Payments**: Stripe Checkout + Webhooks for enrollment automation
- **Email**: Edge Functions for transactional, SendGrid/Mailgun for sequences
- **Forum**: NodeBB on DigitalOcean VPS with JWT SSO
- **Real-time**: Supabase Realtime for live discussions and notifications
- **Analytics**: Mixpanel or custom with Supabase (events table)

---

## CONTENT PHILOSOPHY

Courses follow this structure:
- **Module 1**: Foundational framework (Sales Safari, PROOF, etc.)
- **Module 2**: Application exercises (apply to your business)
- **Module 3**: AI acceleration techniques
- **Module 4**: Real-world case studies

Each lesson includes:
- Clear learning objectives (3-5 specific outcomes)
- Estimated time commitment
- Video OR article content (not both - avoid redundancy)
- Practical exercise with AI coaching
- Downloadable resources (templates, checklists)
- Discussion prompts

Exercises are evaluated on:
- Depth of thinking (not just completion)
- Framework application quality
- Strategic reasoning ability
- Evidence of iteration and refinement

---

## KEY DIFFERENTIATORS

1. **AI-native**: Not "use AI as a tool" but "AI coaches your strategic thinking"
2. **Outcome-focused**: First customer > course completion
3. **Accountability-first**: Pods are core feature, not afterthought
4. **Bootstrapper values**: Profitability > growth, validation > funding
5. **Teaching depth**: Frameworks and mental models, not tactics
6. **Community-driven**: 20% of learning happens through peers
7. **Soft gating**: Encouragement without punishment

---

This is the comprehensive systems prompt for SoloFrameHub Academy. Use this as the foundation for all development decisions, feature prioritization, and architectural choices.
